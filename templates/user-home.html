{% extends 'base.html' %}

{% block styles %}

  <link href="static/foodio.css" rel="stylesheet">
{% endblock %}


{% block content %}

  <nav id="user-home" class="navbar navbar-expand-lg navbar-dark" style="background-color: red;">
    <span id="logo" class="navbar-brand" href="#">Foodio</span>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarText">

       <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link active" href="#my-refrigerator">My Refrigerator</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="#recipes">Recipes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="#favorites">Favorites</a>
        </li>
        <li class="nav-item active">
          <a class="nav-link" href="/logout">Log Out</a>
        </li>
        </li>
      </ul>
    </div>

  </nav>
  <br><br>

  <div class="jumbotron">
<!--     <div class='jumboimg'>

    </div> -->

    <div id='jumbotext'>

  <h1>
    <span>Welcome, {{ user_name }}!</span></h1>

  <p><span>Dinner made easy with Foodio!</span></p>
  <hr>
  <p> <br>
    <span>Virtually maintain your refrigerator to find delicious recipes with ingredients you already have! Yumm!</span></p>
  
  <a id='jumbo' class="btn" href="#my-refrigerator" role="button">Get started</a>
  </div>
</div> 

<br><br>


<div data-spy="scroll" data-target="#user-home" data-offset="0">
  <h2 id="my-refrigerator">My Refrigerator</h2>
  <p>
 <!-- /////////////////// DISPLAY FOOD IN REFRIGERATOR///////////////////// -->

      <br>

      <div id='display-food'>

        {% for item in user_refrigerator %}
        <div id='fooddiv'>

          <!-- food name, image, quantity -->
          {{ item.food.food }} <br>
          <img src="https://spoonacular.com/cdn/ingredients_100x100/{{ item.food.food }}.jpg" alt"food-img" style="width:75px;height:75px;" />
          <br>Qty: {{ item.food.quantity }} <br>

          <!-- add button -->
          <form id='add-quantity-form' class="inline">
          <p hidden id="add-btn-{{ loop.index }}">{{ item.food.food_id }}</p> 
          <button type='button' id="add-btn-{{ loop.index }}" value='+' onClick="addQuantity(this)"><b>+</b></button>
          </form>

          <!-- subtract button -->
          <form id='subtract-quantity-form' class="inline">
          <p hidden id="sub-btn-{{ loop.index }}">{{ item.food.food_id }}</p> 
          <button type='button' id="sub-btn-{{ loop.index }}" value='-' onClick="subQuantity(this)"><b>-</b></button>
          </form>

          <br><br>

        </div>

        {% endfor %}

      </div>


        <!-- load JS  -->
        <script type=text/javascript src="{{
          url_for('static', filename='add-quantity.js') }}"></script>

        <script type=text/javascript src="{{
          url_for('static', filename='sub-quantity.js') }}"></script>

<br><br>


<div class="row">
  <div class="col-3">
    <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
      
      <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#add-food" role="tab" aria-controls="v-pills-home" aria-selected="true">Add ingredient</a>

      <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#remove-food" role="tab" aria-controls="v-pills-profile" aria-selected="false">Remove ingredient</a>

    
    </div>
  </div>
  <div class="col-9">
    <div class="tab-content" id="v-pills-tabContent">
      
      <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
    <!-- ////////////////////ADD FOOD TO REFRIDGERATOR ///////////////////////// -->
        <div id='add-food'>


<!-- http://blog.teamtreehouse.com/creating-autocomplete-dropdowns-datalist-element -->
<!-- datalist autocomplete dropdown -->

          <datalist id="foods">

            {% for food in food_list %}
              <option value="{{ food }}">  
            {% endfor %}

          </datalist>

          <form id='add-food-form' >

            Ingredient: <input type="text" id='ingredient' name="ingredient" list="foods"><br>
            Quantity: <input type="text" id='quantity' name="quantity"><br>
          <!--   Expires on:<input type="text" name="expiration"> -->
            <input type='submit' value='add'>
            <input type="reset" value="reset">
          </form>
        </div>  

        <!-- load JS  -->

        <script type=text/javascript src="{{
          url_for('static', filename='add-food.js') }}"></script>
      </div>

      
      <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
    <!-- //////////////////REMOVE FOOD FROM REFRIDGERATOR /////////////////////// -->

        <div id='remove-food'>

          <form id='remove-food-form'>
         
           <div id='rmfood'>
            <select id="rm-ingredient" name="rm-ingredient">
              {% for item in user_refrigerator %}
                  <!-- item object of food, at food name -->
                  <option value="{{item.food.food_id}} {{item.food.food}}">{{ item.food.food }}</option>
              {% endfor %}
              &nbsp;
            </select>
              </div>

            <input type='submit' value='remove'>
            
          </form>
      </div>   

        <script type=text/javascript src="{{
          url_for('static', filename='remove-food.js') }}"></script>

        <br><br>
  </div>
</div>
</div>
</p>

<br><br>

      </div>
    
    <!-- </div>
  </div>
</div>
 -->


 <h2 id="recipes">Recipes</h2>
  <p>
 <!-- ////////////////////////DISPLAY RECIPES ///////////////////////////// -->

        <div id="display-recipes">
          <button class="btn" id='get-recipes' onClick="refreshRecipes(this)">
            Get Recipes!</button><br><br>

            <div id='recipediv'>

            <script type=text/javascript src="{{
              url_for('static', filename='display-recipes.js') }}"></script>
            
            </div>

        </div>


      <br><br><br>
  </p>



<h2 id="favorites">Favorites</h2>
  <p>
 <!-- /////////////////////DISPLAY FAVORITE RECIPES //////////////////////// -->

        <div id="display-favs">

            {% for item in fav_recipes %}

            <div id='favdiv'>

            {{ item.title }} <br>
            <a href="{{ item.url }}">
            <img src="{{ item.img}}" alt="Image"></a>

            <br>
            <!-- Delete button goes here -->
            <form id='delete-fav' class="inline">
            <button type='button' id="del-btn-{{ loop.index }}" value="{{ item.title }}" onClick="delRecipe(this)">delete</button>
            </form>
            <br><br>

            </div>
            {% endfor %}

        </div>

        <!-- load js -->
          <script type=text/javascript src="{{
            url_for('static', filename='del-fav.js') }}"></script>
<br><br><br>
  </p>




{% endblock %}
